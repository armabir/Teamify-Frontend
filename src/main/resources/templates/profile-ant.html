<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${user.firstName + ' ' + user.lastName + ' - Profile'}">Profile - Teamify</title>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/profile-ant.css}">
</head>

<body>

<!-- Mobile Sidebar Toggle -->
<button class="toggle-sidebar-btn">
    <i class="fas fa-bars"></i>
</button>

<div class="main-container">

    <!-- Sidebar -->
    <aside class="glass-panel sidebar">
        <div class="sidebar-brand">
            <i class="fas fa-layer-group"></i> Teamify
        </div>
        <nav class="sidebar-nav">
            <a href="#" class="nav-item active">
                <i class="fas fa-user"></i> Profile
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-chart-line"></i> Dashboard
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-users"></i> Teams
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-calendar-alt"></i> Events
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="content-area">

        <!-- 1. Profile Header Card -->
        <div class="glass-panel profile-header">
            <div class="cover-image"
                 th:style="'background-image: url(' + ${user.coverPictureUrl != null ? user.coverPictureUrl : '/images/default-cover.jpg'} + ')'">
            </div>
            <div class="cover-overlay"></div>

            <div class="header-content">
                <div class="profile-pic-container">
                    <img th:src="${user.profilePictureUrl != null ? user.profilePictureUrl : '/images/default-avatar.png'}"
                         alt="Profile Picture" class="profile-pic">
                </div>
                <div class="fullname" th:text="${user.firstName + ' ' + user.lastName}">John Doe</div>
                <div class="username" th:text="${'@' + user.userName}">@johndoe</div>
                <p class="bio" th:text="${user.bio}">Senior Backend Developer | Java & Spring Boot Enthusiast |
                    Building scalable systems.</p>
            </div>
        </div>

        <div class="profile-body">

            <!-- 2. Left Column -->
            <div class="left-column">

                <!-- About Card -->
                <div class="glass-panel card-content">
                    <h3 class="card-title"><i class="fas fa-info-circle"></i> About</h3>
                    <p class="description" th:text="${user.about}"
                       style="margin-bottom: 15px; color: var(--text-secondary);">
                        Passionate developer with 5+ years of experience in building distributed systems.
                    </p>

                    <div class="info-row" th:if="${user.location}">
                        <i class="fas fa-map-marker-alt"></i>
                        <span th:text="${user.location}">New York, USA</span>
                    </div>

                    <div class="social-links">
                        <!-- Assuming simple string links for now, logic to determine icon would be here or in backend helper -->
                        <!-- This is a placeholder iter since the model defines List<String> -->
                        <a th:each="link : ${user.socialMediaLinkList}" th:href="${link}" target="_blank"
                           class="social-link">
                            <i class="fas fa-link"></i>
                        </a>
                    </div>
                </div>

                <!-- Skills Card -->
                <div class="glass-panel card-content">
                    <h3 class="card-title"><i class="fas fa-code"></i> Skills</h3>
                    <div class="tag-container">
                        <span th:each="skill : ${user.skills}" th:text="${skill.name}" class="tag">Java</span>
                    </div>
                </div>

                <!-- Interests Card -->
                <div class="glass-panel card-content">
                    <h3 class="card-title"><i class="fas fa-heart"></i> Interests</h3>
                    <div class="tag-container" style="margin-bottom: 20px;">
                            <span th:each="interest : ${user.interests}" th:text="${interest.name}"
                                  class="tag">AI</span>
                    </div>

                    <h4 style="color: var(--text-primary); margin-bottom: 10px; font-size: 1rem;">Looking For:</h4>
                    <ul class="looking-for-list">
                        <li th:each="item : ${user.lookingForList}" th:text="${item}">Collaboration</li>
                    </ul>
                </div>

            </div>

            <!-- 3. Right Column -->
            <div class="right-column">

                <!-- Toggle Bar -->
                <div class="glass-panel tabs-container">
                    <button class="tab-btn active" data-target="projects-section">Projects</button>
                    <button class="tab-btn" data-target="education-section">Education</button>
                    <button class="tab-btn" data-target="experience-section">Experience</button>
                </div>

                <!-- Tab Contents Container -->
                <div class="glass-panel card-content" style="min-height: 400px;">

                    <!-- Projects Section -->
                    <div id="projects-section" class="tab-content active">
                        <div class="projects-grid">
                            <div th:each="project : ${user.projectList}" class="glass-panel project-card"
                                 style="background: rgba(255,255,255,0.05); border: none;">
                                <img th:src="${project.coverImageUrl != null ? project.coverImageUrl : '/images/default-project.jpg'}"
                                     alt="Project Cover" class="project-cover">
                                <div class="project-details">
                                    <div class="project-header">
                                        <div class="project-title" th:text="${project.title}">Teamify Platform</div>
                                    </div>
                                    <div class="project-role" th:text="${project.role}">Lead Developer</div>
                                    <div class="project-date">
                                        <span th:text="${project.startDate}">2023-01</span> -
                                        <span
                                                th:text="${project.endDate != null ? project.endDate : 'Present'}">Present</span>
                                    </div>
                                    <p class="project-desc" th:text="${project.description}">A comprehensive project
                                        management tool built with Spring Boot.</p>

                                    <div class="tag-container" style="margin-bottom: 15px;">
                                            <span th:each="tech : ${project.techStacks}" th:text="${tech}" class="tag"
                                                  style="font-size: 0.75rem;">Java</span>
                                    </div>

                                    <div class="project-footer">
                                        <a th:if="${project.projectUrl}" th:href="${project.projectUrl}"
                                           target="_blank" class="learn-more-btn">
                                            Learn More <i class="fas fa-arrow-right"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div th:if="${#lists.isEmpty(user.projectList)}"
                             style="text-align: center; color: var(--text-secondary); padding: 40px;">
                            <i class="fas fa-folder-open"
                               style="font-size: 3rem; margin-bottom: 15px; opacity: 0.5;"></i>
                            <p>No projects to display yet.</p>
                        </div>
                    </div>

                    <!-- Education Section -->
                    <div id="education-section" class="tab-content">
                        <div class="list-container">
                            <div th:each="edu : ${user.educationList}" class="list-item">
                                <div class="item-icon-box">
                                    <img th:if="${edu.institutionImageUrl}" th:src="${edu.institutionImageUrl}"
                                         alt="Logo" class="item-icon">
                                    <i th:unless="${edu.institutionImageUrl}"
                                       class="fas fa-graduation-cap default-icon"></i>
                                </div>
                                <div class="item-content">
                                    <div class="item-title" th:text="${edu.institutionName}">University of
                                        Technology</div>
                                    <div class="item-subtitle" th:text="${edu.degree + ' in ' + edu.fieldOfStudy}">
                                        BSc. Computer Science</div>
                                    <div class="item-meta">
                                            <span><i class="far fa-calendar-alt"></i> <span
                                                    th:text="${edu.startDate}">2018</span> - <span
                                                    th:text="${edu.endDate != null ? edu.endDate : 'Present'}">2022</span></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div th:if="${#lists.isEmpty(user.educationList)}"
                             style="text-align: center; color: var(--text-secondary); padding: 40px;">
                            <p>No education details added.</p>
                        </div>
                    </div>

                    <!-- Experience Section -->
                    <div id="experience-section" class="tab-content">
                        <div class="list-container">
                            <div th:each="exp : ${user.experienceList}" class="list-item">
                                <div class="item-icon-box">
                                    <img th:if="${exp.companyImageUrl}" th:src="${exp.companyImageUrl}" alt="Logo"
                                         class="item-icon">
                                    <i th:unless="${exp.companyImageUrl}" class="fas fa-briefcase default-icon"></i>
                                </div>
                                <div class="item-content">
                                    <div class="item-title" th:text="${exp.companyName}">Tech Solutions Inc.</div>
                                    <div class="item-subtitle" th:text="${exp.role}">Backend Engineer</div>
                                    <div class="item-meta">
                                            <span th:if="${exp.location}"><i class="fas fa-map-marker-alt"></i> <span
                                                    th:text="${exp.location}">London, UK</span></span>
                                        <span><i class="far fa-calendar-alt"></i> <span
                                                th:text="${exp.startDate}">2022-06</span> - <span
                                                th:text="${exp.endDate != null ? exp.endDate : 'Present'}">Present</span></span>
                                    </div>
                                    <div class="item-desc" th:text="${exp.description}">Developed efficient REST
                                        APIs...</div>
                                </div>
                            </div>
                        </div>
                        <div th:if="${#lists.isEmpty(user.experienceList)}"
                             style="text-align: center; color: var(--text-secondary); padding: 40px;">
                            <p>No experience details added.</p>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </main>
</div>

<!-- Scripts -->
<script th:src="@{/js/profile-ant.js}"></script>

</body>

</html>