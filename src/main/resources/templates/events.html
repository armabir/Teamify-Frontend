<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events | Teamify</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/events.css" th:href="@{/css/events.css}">
</head>
<body>

<!-- Ambient Glows -->
<div class="ambient-glow glow-1"></div>
<div class="ambient-glow glow-2"></div>

<!-- Sidebar -->
<aside id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <div class="sidebar-logo">
            <span class="logo-text">Team<span class="text-highlight">ify</span>.</span>
        </div>
        <button id="sidebar-close" class="sidebar-close-btn"><i class="fas fa-times"></i></button>
    </div>
    <nav class="sidebar-nav">
        <a href="/profile" class="sidebar-link"><i class="fas fa-user"></i><span>Profile</span></a>
        <a href="/dashboard" class="sidebar-link"><i class="fas fa-th-large"></i><span>Dashboard</span></a>
        <a href="/discover" class="sidebar-link"><i class="fas fa-compass"></i><span>Discover</span></a>
        <a href="/teams" class="sidebar-link"><i class="fas fa-users"></i><span>Teams</span></a>
        <a href="/events" class="sidebar-link active"><i class="fas fa-calendar-alt"></i><span>Events</span></a>
    </nav>
    <div class="sidebar-footer">
        <a href="/signout" class="sidebar-link logout-link"><i class="fas fa-sign-out-alt"></i><span>Logout</span></a>
    </div>
</aside>

<button id="sidebar-toggle" class="sidebar-toggle-btn"><i class="fas fa-bars"></i></button>
<div id="sidebar-overlay" class="sidebar-overlay"></div>

<!-- Page Wrapper -->
<div class="page-wrapper">
    <main class="main-content">

        <!-- Header -->
        <header class="events-header">
            <div class="status-badge">
                <span class="status-dot"></span>
                SYSTEM UPDATE: NEW HACKATHONS LIVE
            </div>
            <div class="header-text">
                <h1>Upcoming <span class="text-gradient">Events</span></h1>
                <p>Sync with the network. Expand your skills.</p>
            </div>
        </header>

        <!-- Filters & Search -->
        <div class="filter-section">
            <div class="search-bar-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="eventSearchInput" placeholder="Search hackathons, workshops..." class="glass-input">
            </div>
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="virtual">Virtual</button>
                <button class="filter-btn" data-filter="in-person">In-Person</button>
            </div>
        </div>

        <!-- Events Grid -->
        <section class="events-grid">
            <div th:each="event : ${events}" class="event-card" th:attr="data-event-id=${event.id}">
                <div class="spotlight"></div>
                <div class="card-decoration"></div>

                <!-- Event Banner -->
                <div class="event-banner"
                     th:style="'background-image: linear-gradient(to bottom, transparent, rgba(3,3,5,0.9)), url(' + (${event.coverUrl != null ? event.coverUrl : '/images/default-event.jpg'}) + ');'">
                    <span class="event-type-badge" th:text="${event.eventType}">Workshop</span>
                </div>

                <!-- Event Content -->
                <div class="event-content">
                    <div class="event-meta-row">
                        <span class="event-date" th:text="${#temporals.format(event.createdAt, 'dd MMM yyyy')}">02 FEB 2026</span>
                        <div class="team-avatars">
                            <div th:each="teamName : ${event.teamNames}"
                                 class="team-avatar"
                                 th:title="${teamName}">
                                <span th:text="${#strings.substring(teamName,0,1)}">T</span>
                            </div>
                        </div>
                    </div>

                    <h3 class="event-title" th:text="${event.title}">Event Title</h3>
                    <p class="event-description" th:text="${event.shortDescription}">Short description of the event goes here...</p>

                    <div class="event-location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span th:text="${event.location}">Remote</span>
                    </div>

                    <!-- Event Actions -->
                    <div class="event-actions">
                        <button class="btn-details"
                                th:attr="data-event-id=${event.id},
                                         data-event-title=${event.title},
                                         data-event-description=${event.shortDescription},
                                         data-event-description=${event.fullDescription},
                                         data-event-type=${event.eventType},
                                         data-event-location=${event.location},
                                         data-event-date=${#temporals.format(event.createdAt, 'dd MMM yyyy')},
                                         data-event-cover=${event.coverUrl}">
                            Details
                        </button>
                        <button class="btn-add-calendar" title="Add to Calendar">
                            <i class="far fa-calendar-plus"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Empty State -->
        <div th:if="${events == null or events.empty}" class="empty-state">
            <div class="empty-icon">
                <i class="fas fa-calendar-times"></i>
            </div>
            <h3>No events found</h3>
            <p>Check back later for new opportunities.</p>
        </div>

    </main>
</div>

<!-- Event Details Modal -->
<div id="modal-event-details" class="modal-overlay">
    <div class="glass-card modal-content modal-event">
        <div class="modal-header">
            <h3 class="modal-title" id="modal-event-title">Event Details</h3>
            <button class="modal-close"><i class="fas fa-times"></i></button>
        </div>

        <div class="modal-body">
            <!-- Event Cover Image -->
            <div id="modal-event-cover" class="modal-event-cover"></div>

            <!-- Event Info -->
            <div class="modal-event-info">
                <div class="info-row">
                    <div class="info-label">
                        <i class="fas fa-tag"></i> Type
                    </div>
                    <div class="info-value" id="modal-event-type">Workshop</div>
                </div>

                <div class="info-row">
                    <div class="info-label">
                        <i class="fas fa-calendar"></i> Date
                    </div>
                    <div class="info-value" id="modal-event-date">02 FEB 2026</div>
                </div>

                <div class="info-row">
                    <div class="info-label">
                        <i class="fas fa-map-marker-alt"></i> Location
                    </div>
                    <div class="info-value" id="modal-event-location">Remote</div>
                </div>
            </div>

            <!-- Event Description -->
            <div class="modal-event-description">
                <h4>About This Event</h4>
                <p id="modal-event-description-text">Event description will appear here...</p>
            </div>

            <!-- Modal Actions -->
            <div class="modal-actions">
                <button class="btn-cancel modal-close-btn">Close</button>
                <button class="btn-save">
                    <i class="far fa-calendar-plus"></i> Add to Calendar
                </button>
            </div>
        </div>
    </div>
</div>

<script src="/js/events.js" th:src="@{/js/events.js}"></script>
</body>
</html>